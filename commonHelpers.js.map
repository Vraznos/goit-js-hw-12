{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44373607-23d837ad960924b19f5bc44a0';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    page: page,\n    per_page: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${BASE_URL}?${params}`;\n\n  try {\n    const response = await axios.get(url, { params });\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n    return data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderImageGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(image => {\n      return `\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"info-item\">\n            <p class=\"info-title\">Likes</p>\n            <p class=\"info-value\">${image.likes}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Views</p>\n            <p class=\"info-value\">${image.views}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Comments</p>\n            <p class=\"info-value\">${image.comments}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Downloads</p>\n            <p class=\"info-value\">${image.downloads}</p>\n          </div>\n        </div>\n      </div>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function updateBtnStatus(page, maxPage, btnLoadMore) {\n  if (page >= maxPage) {\n    hideLoadMore(btnLoadMore);\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } else {\n    showLoadMore(btnLoadMore);\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function showLoadMore(btnLoadMore) {\n  btnLoadMore.classList.remove('active');\n}\nexport function hideLoadMore(btnLoadMore) {\n  btnLoadMore.classList.add('active');\n}\n\nexport function showLoader(loader) {\n  loader.classList.remove('hidden');\n}\nexport function hideLoader(loader) {\n  loader.classList.add('hidden');\n}\n\nexport function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImageGallery,\n  showError,\n  showLoadMore,\n  hideLoadMore,\n  showLoader,\n  hideLoader,\n  updateBtnStatus,\n  smoothScroll,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input[name=\"query\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nlet query = '';\nlet page = 1;\nlet maxPage = 1;\nlet perPage = 15;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  query = input.value.trim();\n\n  if (query === '') {\n    showError('Please enter a search query.');\n    hideLoadMore(btnLoadMore);\n    return;\n  }\n\n  page = 1;\n\n  showLoader(loader);\n  hideLoadMore(btnLoadMore);\n  gallery.innerHTML = '';\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n\n    if (data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader(loader);\n      return;\n    }\n\n    renderImageGallery(data.hits);\n\n    if (data.totalHits > perPage) {\n      showLoadMore(btnLoadMore);\n    } else {\n      hideLoadMore(btnLoadMore);\n    }\n  } catch (error) {\n    showError('Something went wrong. Please try again later.');\n  } finally {\n    hideLoader(loader);\n  }\n\n  form.reset();\n});\n\nbtnLoadMore.addEventListener('click', async () => {\n  page++;\n  hideLoadMore(btnLoadMore);\n  showLoader(loader);\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    if (data.hits.length === 0) {\n      showError('No more images found');\n      return;\n    }\n\n    renderImageGallery(data.hits);\n\n    if (page < maxPage) {\n      showLoadMore(btnLoadMore);\n    } else {\n      hideLoadMore(btnLoadMore);\n    }\n  } catch (error) {\n    showError('Something went wrong. Please try again later.');\n  } finally {\n    hideLoader(loader);\n    smoothScroll();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","url","data","axios","error","lightbox","renderImageGallery","images","gallery","markup","image","SimpleLightbox","showError","message","iziToast","showLoadMore","btnLoadMore","hideLoadMore","showLoader","loader","hideLoader","smoothScroll","cardHeight","form","input","maxPage"],"mappings":"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"}